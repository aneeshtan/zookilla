{"ast":null,"code":"var _jsxFileName = \"/Users/farshadghazanfari/Documents/www/npat/components/Game/ResultsTable.js\";\nvar __jsx = React.createElement;\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, Spinner, FlexColumn, FlexContainer } from '../StyledComponents';\nimport theme from '../../constants/theme';\nimport { socket } from '../../constants/websocket';\nconst TableContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__TableContainer\",\n  componentId: \"sc-1lg56mx-0\"\n})([\"display:flex;flex-wrap:wrap;justify-content:space-around;\"]);\nconst Container = styled.div.withConfig({\n  displayName: \"ResultsTable__Container\",\n  componentId: \"sc-1lg56mx-1\"\n})([\"padding:20px 0;display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;\"]);\nconst Paper = styled.div.withConfig({\n  displayName: \"ResultsTable__Paper\",\n  componentId: \"sc-1lg56mx-2\"\n})([\"background:white;background-size:100% 1.2em;height:auto;margin:0 auto;margin-top:30px;box-shadow:#9e9e9e63 6px 7px 14px 0px;width:250px;padding:30px 30px 30px 30px;background-image:linear-gradient(90deg,transparent 49px,transparent 49px,transparent 51px,transparent 51px),linear-gradient(#eee .1em,transparent .1em);\"]);\nconst Submission = styled.span.withConfig({\n  displayName: \"ResultsTable__Submission\",\n  componentId: \"sc-1lg56mx-3\"\n})([\"color:\", \";word-break:break-all;\"], theme.colors.blue);\nconst StyledIncrementButton = styled.button.withConfig({\n  displayName: \"ResultsTable__StyledIncrementButton\",\n  componentId: \"sc-1lg56mx-4\"\n})([\"font-weight:bold;font-size:14px;border:\", \";color:\", \";cursor:\", \";\"], props => props.disabled ? '1px solid gray' : '1px solid black', props => props.disabled ? 'gray' : 'black', props => props.disabled ? 'not-allowed' : 'pointer');\nconst InputContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__InputContainer\",\n  componentId: \"sc-1lg56mx-5\"\n})([\"margin-left:15px;font-size:1.5em;display:flex;align-items:center;width:80px;justify-content:space-between;\"]);\nconst NumberContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__NumberContainer\",\n  componentId: \"sc-1lg56mx-6\"\n})([\"margin-left:15px;font-size:1.5em;display:flex;align-items:center;width:80px;justify-content:center;\"]);\nconst ResultsTable = ({\n  gameState,\n  round,\n  handleSubmitScore,\n  scoreSubmitted,\n  scorePartner\n}) => {\n  let initialScore = {};\n  const categories = gameState.categories;\n  let scoringId = gameState.scoringType === \"cross\" ? scorePartner.id : socket.id;\n  // sort users so the person being score always comes first\n  let users = sortUserList([...gameState.users], scoringId);\n  users.forEach(user => {\n    categories.forEach(cat => {\n      let similar = similarityCheck(cat, users, user.id, round);\n      if (user.id === scoringId && similar.value) {\n        initialScore = Object.assign({}, initialScore, {\n          [cat]: 5\n        });\n      }\n    });\n  });\n  const {\n    0: currentScore,\n    1: setCurrentScore\n  } = useState(initialScore);\n\n  // Function to call the API and get the score\n  const getScoreFromAPI = async (category, answer) => {\n    try {\n      const response = await fetch(`/api/check-answer`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          category,\n          answer\n        })\n      });\n      const data = await response.json();\n      return data.isCorrect ? 1 : 0; // Assuming 1 point for correct answer, 0 for incorrect\n    } catch (error) {\n      console.error(\"Error checking answer:\", error);\n      return 0; // Handle error appropriately\n    }\n  };\n\n  // Modify the scoring logic\n  const handleScoring = async () => {\n    let newScores = _objectSpread({}, currentScore);\n    for (const category of categories) {\n      const answer = getUserResponse(category); // Function to get user's response\n      const score = await getScoreFromAPI(category, answer);\n      newScores[category] = score;\n    }\n    setCurrentScore(newScores);\n  };\n  let totalScore = 0;\n  useEffect(() => {\n    totalScore = sumAllScores(currentScore);\n  }, [currentScore]);\n  return __jsx(React.Fragment, null, gameState.scoringType === \"cross\" ? __jsx(FlexContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 42\n    }\n  }, __jsx(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 57\n    }\n  }, \"You are scoring for \", __jsx(Submission, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 81\n    }\n  }, scorePartner.name), \"!\")) : false, __jsx(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }\n  }, users.map(user => __jsx(Paper, {\n    key: user.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 26\n    }\n  }, __jsx(\"h2\", {\n    style: {\n      display: 'flex',\n      justifyContent: 'space-between'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 74\n    }\n  }, user.name), user.id === scoringId ? __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 36\n    }\n  }, \"Score\") : false), categories.map(category => {\n    let similar = similarityCheck(category, users, user.id, round);\n    let selfScoreCard = user.id === scoringId;\n    return __jsx(React.Fragment, {\n      key: category,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 18\n      }\n    }, similar.value && selfScoreCard ? __jsx(\"span\", {\n      style: {\n        color: theme.colors.red\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 47\n      }\n    }, scorePartner.name || 'You', \" and \", similar.name, \" put down the same word for \", category) : false, __jsx(\"div\", {\n      style: {\n        marginBottom: '10px',\n        display: \"flex\",\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      key: category,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      style: {\n        width: selfScoreCard ? \"150px\" : \"auto\",\n        fontSize: \"1.2em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, category, \":\", `  `, \" \", __jsx(Submission, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 35\n      }\n    }, user.responses[round][category] || '-')), selfScoreCard ? user.responses[round][category] ? __jsx(InputContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 51\n      }\n    }, __jsx(NumberInput, {\n      category: category,\n      setCurrentScore: setCurrentScore,\n      currentScore: currentScore,\n      value: similar.value ? 5 : 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }), \" \") : __jsx(NumberContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 167\n      }\n    }, \"0\") : ''));\n  }), user.id === scoringId ? __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 34\n    }\n  }, `Total Score: ${sumAllScores(currentScore)}`) : false))), __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, !scoreSubmitted ? __jsx(React.Fragment, null, __jsx(Button, {\n    onClick: event => {\n      event.preventDefault();\n      handleSubmitScore(totalScore, scoringId);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, \"Submit\")) : __jsx(FlexColumn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, \"Waiting for others\"), __jsx(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  }))));\n};\nconst similarityCheck = (category, users, currentUserId, round) => {\n  let currentUser = users.find(user => user.id === currentUserId);\n  let currentUserResponse = currentUser.responses[round][category] ? currentUser.responses[round][category].toLowerCase().trim() : null;\n  let value = false;\n  let name = null;\n  users.filter(user => user.id !== currentUserId).forEach(user => {\n    let otherResponse = user.responses[round][category] ? user.responses[round][category].toLowerCase().trim() : null;\n    if (currentUserResponse && otherResponse && currentUserResponse === otherResponse) {\n      value = true;\n      name = user.name;\n    }\n    return;\n  });\n  return {\n    value,\n    name\n  };\n};\nconst sumAllScores = scores => Object.keys(scores).map(cat => scores[cat]).reduce((a, b) => a + b, 0);\nconst NumberInput = ({\n  value,\n  currentScore,\n  setCurrentScore,\n  category\n}) => {\n  const {\n    0: numberValue,\n    1: setNumberValue\n  } = useState(value);\n  useEffect(() => {\n    setCurrentScore(Object.assign({}, currentScore, {\n      [category]: value\n    }));\n  }, []);\n  const onMinus = () => {\n    setCurrentScore(Object.assign({}, currentScore, {\n      [category]: numberValue - 5\n    }));\n    if (!(numberValue <= 0)) setNumberValue(numberValue - 5);\n  };\n  const onPlus = () => {\n    setCurrentScore(Object.assign({}, currentScore, {\n      [category]: numberValue + 5\n    }));\n    if (!(numberValue >= 10)) setNumberValue(numberValue + 5);\n  };\n  return __jsx(React.Fragment, null, __jsx(StyledIncrementButton, {\n    disabled: numberValue === 0,\n    onClick: () => onMinus(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 12\n    }\n  }, \"-\"), numberValue, __jsx(StyledIncrementButton, {\n    disabled: numberValue === 10,\n    onClick: () => onPlus(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 128\n    }\n  }, \"+\"));\n};\nconst sortUserList = (users, scoringId) => {\n  let index = users.findIndex(user => user.id === scoringId);\n  if (index != -1) {\n    let first = users.splice(index, 1)[0];\n    users.unshift(first);\n    return users;\n  }\n  return users;\n};\nexport default ResultsTable;","map":{"version":3,"names":["React","useState","useEffect","styled","Button","Spinner","FlexColumn","FlexContainer","theme","socket","TableContainer","div","withConfig","displayName","componentId","Container","Paper","Submission","span","colors","blue","StyledIncrementButton","button","props","disabled","InputContainer","NumberContainer","ResultsTable","gameState","round","handleSubmitScore","scoreSubmitted","scorePartner","initialScore","categories","scoringId","scoringType","id","users","sortUserList","forEach","user","cat","similar","similarityCheck","value","Object","assign","currentScore","setCurrentScore","getScoreFromAPI","category","answer","response","fetch","method","headers","body","JSON","stringify","data","json","isCorrect","error","console","handleScoring","newScores","_objectSpread","getUserResponse","score","totalScore","sumAllScores","__jsx","Fragment","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","name","map","key","style","display","justifyContent","selfScoreCard","color","red","marginBottom","alignItems","width","fontSize","responses","NumberInput","onClick","event","preventDefault","currentUserId","currentUser","find","currentUserResponse","toLowerCase","trim","filter","otherResponse","scores","keys","reduce","a","b","numberValue","setNumberValue","onMinus","onPlus","index","findIndex","first","splice","unshift"],"sources":["/Users/farshadghazanfari/Documents/www/npat/components/Game/ResultsTable.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, Spinner, FlexColumn, FlexContainer } from '../StyledComponents'\nimport theme from '../../constants/theme'\nimport { socket } from '../../constants/websocket'\n\nconst TableContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`\n\nconst Container = styled.div`\n  padding: 20px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex-wrap: wrap;\n`\n\nconst Paper = styled.div`\n  background: white;\n  background-size: 100% 1.2em;\n  height: auto;\n  margin: 0 auto;\n  margin-top: 30px;\n  box-shadow: #9e9e9e63 6px 7px 14px 0px;\n  width: 250px;\n  padding: 30px 30px 30px 30px;\n  background-image:\n  linear-gradient(90deg, transparent 49px, transparent 49px, transparent 51px, transparent 51px),\n  linear-gradient(#eee .1em, transparent .1em);\n`\n\nconst Submission = styled.span`\n  color: ${theme.colors.blue};\n  word-break: break-all;\n`\n\nconst StyledIncrementButton = styled.button`\n  font-weight: bold;\n  font-size: 14px;\n  border: ${props => props.disabled ? '1px solid gray' : '1px solid black'};\n  color: ${props => props.disabled ? 'gray' : 'black'};\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n`\n\nconst InputContainer = styled.div`\n  margin-left: 15px;\n  font-size: 1.5em;\n  display: flex;\n  align-items: center;\n  width: 80px;\n  justify-content: space-between;\n`\n\nconst NumberContainer = styled.div`\n  margin-left: 15px;\n  font-size: 1.5em;\n  display: flex;\n  align-items: center;\n  width: 80px;\n  justify-content: center;\n`\n\nconst ResultsTable = ({ gameState, round, handleSubmitScore, scoreSubmitted, scorePartner }) => {\n  let initialScore = {}\n  const categories = gameState.categories;\n\n  let scoringId = gameState.scoringType === \"cross\" ? scorePartner.id : socket.id\n  // sort users so the person being score always comes first\n  let users = sortUserList([...gameState.users], scoringId)\n\n  users.forEach(user => {\n    categories.forEach(cat => {\n      let similar = similarityCheck(cat, users, user.id, round)\n      if (user.id === scoringId && similar.value) {\n\n        initialScore = Object.assign({}, initialScore, { [cat]: 5 })\n      }\n    })\n  })\n\n  const [currentScore, setCurrentScore] = useState(initialScore);\n\n  // Function to call the API and get the score\nconst getScoreFromAPI = async (category, answer) => {\n  try {\n    const response = await fetch(`/api/check-answer`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ category, answer }),\n    });\n    const data = await response.json();\n    return data.isCorrect ? 1 : 0; // Assuming 1 point for correct answer, 0 for incorrect\n  } catch (error) {\n    console.error(\"Error checking answer:\", error);\n    return 0; // Handle error appropriately\n  }\n};\n\n// Modify the scoring logic\nconst handleScoring = async () => {\n  let newScores = {...currentScore};\n\n  for (const category of categories) {\n    const answer = getUserResponse(category); // Function to get user's response\n    const score = await getScoreFromAPI(category, answer);\n    newScores[category] = score;\n  }\n\n  setCurrentScore(newScores);\n};\n\n  let totalScore = 0;\n  useEffect(() => {\n    totalScore = sumAllScores(currentScore)\n  }, [currentScore])\n\n\n  return <>\n    {gameState.scoringType === \"cross\" ? <FlexContainer><h1>You are scoring for <Submission>{scorePartner.name}</Submission>!</h1></FlexContainer> : false}\n    <TableContainer>\n      {users.map(user => <Paper key={user.id}>\n        <h2 style={{ display: 'flex', justifyContent: 'space-between' }}><span>{user.name}</span>\n          {user.id === scoringId ? <span>Score</span> : false}\n        </h2>\n        {categories.map(category => {\n          let similar = similarityCheck(category, users, user.id, round)\n          let selfScoreCard = user.id === scoringId;\n          return <React.Fragment key={category}>\n            {similar.value && selfScoreCard ? <span style={{ color: theme.colors.red }}>{scorePartner.name || 'You'} and {similar.name} put down the same word for {category}</span> : false}\n            <div style={{ marginBottom: '10px', display: \"flex\", justifyContent: 'space-between', alignItems: 'center' }} key={category}>\n              <div style={{ width: selfScoreCard ? \"150px\" : \"auto\", fontSize: \"1.2em\" }}>\n                {category}:{`  `} <Submission>{user.responses[round][category] || '-'}</Submission>\n              </div>\n              {selfScoreCard ?\n                user.responses[round][category] ? <InputContainer>\n                  <NumberInput category={category} setCurrentScore={setCurrentScore} currentScore={currentScore} value={similar.value ? 5 : 0} /> </InputContainer> : <NumberContainer>0</NumberContainer>\n                : ''}\n            </div>\n          </React.Fragment>\n        }\n        )}\n        {user.id === scoringId ? <h2>{`Total Score: ${sumAllScores(currentScore)}`}</h2> : false}\n      </Paper>)}\n    </TableContainer>\n    <Container>\n      {!scoreSubmitted ? <>\n        <Button onClick={(event) => {\n          event.preventDefault()\n          handleSubmitScore(totalScore, scoringId)\n        }}>Submit</Button>\n      </> : <FlexColumn>\n          <h2>Waiting for others</h2>\n          <Spinner />\n        </FlexColumn>}\n    </Container>\n  </>\n}\n\nconst similarityCheck = (category, users, currentUserId, round) => {\n  let currentUser = users.find(user => user.id === currentUserId);\n  let currentUserResponse = currentUser.responses[round][category] ? currentUser.responses[round][category].toLowerCase().trim() : null;\n\n  let value = false;\n  let name = null;\n  users.filter(user => user.id !== currentUserId).forEach(user => {\n    let otherResponse = user.responses[round][category] ? user.responses[round][category].toLowerCase().trim() : null;\n    if (currentUserResponse && otherResponse && (currentUserResponse === otherResponse)) {\n      value = true;\n      name = user.name\n    }\n    return;\n  })\n  return { value, name };\n}\n\nconst sumAllScores = (scores) => Object.keys(scores).map(cat => scores[cat]).reduce((a, b) => a + b, 0)\n\nconst NumberInput = ({ value, currentScore, setCurrentScore, category }) => {\n  const [numberValue, setNumberValue] = useState(value)\n  useEffect(() => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: value }))\n  }, [])\n\n  const onMinus = () => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: numberValue - 5 }))\n    if (!(numberValue <= 0)) setNumberValue(numberValue - 5)\n  }\n\n  const onPlus = () => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: numberValue + 5 }))\n    if (!(numberValue >= 10)) setNumberValue(numberValue + 5)\n  }\n  return <><StyledIncrementButton disabled={numberValue === 0} onClick={() => onMinus()}>-</StyledIncrementButton>{numberValue}<StyledIncrementButton disabled={numberValue === 10} onClick={() => onPlus()}>+</StyledIncrementButton></>\n}\n\n\nconst sortUserList = (users, scoringId) => {\n  let index = users.findIndex(user => user.id === scoringId);\n  if (index != -1) {\n    let first = users.splice(index, 1)[0];\n    users.unshift(first);\n    return users;\n  }\n  return users\n}\n\n\nexport default ResultsTable;"],"mappings":"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"},"metadata":{},"sourceType":"module"}