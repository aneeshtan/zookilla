{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/farshadghazanfari/Documents/www/npat/components/Game/ResultsTable.js\";\n\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, Spinner, FlexColumn, FlexContainer } from '../StyledComponents';\nimport theme from '../../constants/theme';\nimport { socket } from '../../constants/websocket';\nvar TableContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__TableContainer\",\n  componentId: \"sc-1lg56mx-0\"\n})([\"display:flex;flex-wrap:wrap;justify-content:space-around;\"]);\nvar Container = styled.div.withConfig({\n  displayName: \"ResultsTable__Container\",\n  componentId: \"sc-1lg56mx-1\"\n})([\"padding:20px 0;display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap;\"]);\nvar Paper = styled.div.withConfig({\n  displayName: \"ResultsTable__Paper\",\n  componentId: \"sc-1lg56mx-2\"\n})([\"background:white;background-size:100% 1.2em;height:auto;margin:0 auto;margin-top:30px;box-shadow:#9e9e9e63 6px 7px 14px 0px;width:250px;padding:30px 30px 30px 30px;background-image:linear-gradient(90deg,transparent 49px,transparent 49px,transparent 51px,transparent 51px),linear-gradient(#eee .1em,transparent .1em);\"]);\nvar Submission = styled.span.withConfig({\n  displayName: \"ResultsTable__Submission\",\n  componentId: \"sc-1lg56mx-3\"\n})([\"color:\", \";word-break:break-all;\"], theme.colors.blue);\nvar StyledIncrementButton = styled.button.withConfig({\n  displayName: \"ResultsTable__StyledIncrementButton\",\n  componentId: \"sc-1lg56mx-4\"\n})([\"font-weight:bold;font-size:14px;border:\", \";color:\", \";cursor:\", \";\"], function (props) {\n  return props.disabled ? '1px solid gray' : '1px solid black';\n}, function (props) {\n  return props.disabled ? 'gray' : 'black';\n}, function (props) {\n  return props.disabled ? 'not-allowed' : 'pointer';\n});\nvar InputContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__InputContainer\",\n  componentId: \"sc-1lg56mx-5\"\n})([\"margin-left:15px;font-size:1.5em;display:flex;align-items:center;width:80px;justify-content:space-between;\"]);\nvar NumberContainer = styled.div.withConfig({\n  displayName: \"ResultsTable__NumberContainer\",\n  componentId: \"sc-1lg56mx-6\"\n})([\"margin-left:15px;font-size:1.5em;display:flex;align-items:center;width:80px;justify-content:center;\"]);\n\nvar ResultsTable = function ResultsTable(_ref) {\n  var gameState = _ref.gameState,\n      round = _ref.round,\n      handleSubmitScore = _ref.handleSubmitScore,\n      scoreSubmitted = _ref.scoreSubmitted,\n      scorePartner = _ref.scorePartner;\n  var initialScore = {};\n  var categories = gameState.categories;\n  var scoringId = gameState.scoringType === \"cross\" ? scorePartner.id : socket.id; // sort users so the person being score always comes first\n\n  var users = sortUserList(_toConsumableArray(gameState.users), scoringId);\n  users.forEach(function (user) {\n    categories.forEach(function (cat) {\n      var similar = similarityCheck(cat, users, user.id, round);\n\n      if (user.id === scoringId && similar.value) {\n        initialScore = Object.assign({}, initialScore, _defineProperty({}, cat, 5));\n      }\n    });\n  });\n\n  var _useState = useState(initialScore),\n      currentScore = _useState[0],\n      setCurrentScore = _useState[1];\n\n  var totalScore = 0;\n  useEffect(function () {\n    totalScore = sumAllScores(currentScore);\n  }, [currentScore]);\n  return __jsx(React.Fragment, null, gameState.scoringType === \"cross\" ? __jsx(FlexContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 42\n    }\n  }, __jsx(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 57\n    }\n  }, \"You are scoring for \", __jsx(Submission, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 81\n    }\n  }, scorePartner.name), \"!\")) : false, __jsx(TableContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 5\n    }\n  }, users.map(function (user) {\n    return __jsx(Paper, {\n      key: user.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 26\n      }\n    }, __jsx(\"h2\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }\n    }, __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 74\n      }\n    }, user.name), user.id === scoringId ? __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 36\n      }\n    }, \"Score\") : false), categories.map(function (category) {\n      var similar = similarityCheck(category, users, user.id, round);\n      var selfScoreCard = user.id === scoringId;\n      return __jsx(React.Fragment, {\n        key: category,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 18\n        }\n      }, similar.value && selfScoreCard ? __jsx(\"span\", {\n        style: {\n          color: theme.colors.red\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 47\n        }\n      }, scorePartner.name || 'You', \" and \", similar.name, \" put down the same word for \", category) : false, __jsx(\"div\", {\n        style: {\n          marginBottom: '10px',\n          display: \"flex\",\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        },\n        key: category,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        style: {\n          width: selfScoreCard ? \"150px\" : \"auto\",\n          fontSize: \"1.2em\"\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }\n      }, category, \":\", \"  \", \" \", __jsx(Submission, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 35\n        }\n      }, user.responses[round][category] || '-')), selfScoreCard ? user.responses[round][category] ? __jsx(InputContainer, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 51\n        }\n      }, __jsx(NumberInput, {\n        category: category,\n        setCurrentScore: setCurrentScore,\n        currentScore: currentScore,\n        value: similar.value ? 5 : 0,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }\n      }), \" \") : __jsx(NumberContainer, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 167\n        }\n      }, \"0\") : ''));\n    }), user.id === scoringId ? __jsx(\"h2\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 34\n      }\n    }, \"Total Score: \".concat(sumAllScores(currentScore))) : false);\n  })), __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 5\n    }\n  }, !scoreSubmitted ? __jsx(React.Fragment, null, __jsx(Button, {\n    onClick: function onClick(event) {\n      event.preventDefault();\n      handleSubmitScore(totalScore, scoringId);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, \"Submit\")) : __jsx(FlexColumn, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, __jsx(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"Waiting for others\"), __jsx(Spinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 11\n    }\n  }))));\n};\n\nvar similarityCheck = function similarityCheck(category, users, currentUserId, round) {\n  var currentUser = users.find(function (user) {\n    return user.id === currentUserId;\n  });\n  var currentUserResponse = currentUser.responses[round][category] ? currentUser.responses[round][category].toLowerCase().trim() : null;\n  var value = false;\n  var name = null;\n  users.filter(function (user) {\n    return user.id !== currentUserId;\n  }).forEach(function (user) {\n    var otherResponse = user.responses[round][category] ? user.responses[round][category].toLowerCase().trim() : null;\n\n    if (currentUserResponse && otherResponse && currentUserResponse === otherResponse) {\n      value = true;\n      name = user.name;\n    }\n\n    return;\n  });\n  return {\n    value: value,\n    name: name\n  };\n};\n\nvar sumAllScores = function sumAllScores(scores) {\n  return Object.keys(scores).map(function (cat) {\n    return scores[cat];\n  }).reduce(function (a, b) {\n    return a + b;\n  }, 0);\n};\n\nvar NumberInput = function NumberInput(_ref2) {\n  var value = _ref2.value,\n      currentScore = _ref2.currentScore,\n      setCurrentScore = _ref2.setCurrentScore,\n      category = _ref2.category;\n\n  var _useState2 = useState(value),\n      numberValue = _useState2[0],\n      setNumberValue = _useState2[1];\n\n  useEffect(function () {\n    setCurrentScore(Object.assign({}, currentScore, _defineProperty({}, category, value)));\n  }, []);\n\n  var onMinus = function onMinus() {\n    setCurrentScore(Object.assign({}, currentScore, _defineProperty({}, category, numberValue - 5)));\n    if (!(numberValue <= 0)) setNumberValue(numberValue - 5);\n  };\n\n  var onPlus = function onPlus() {\n    setCurrentScore(Object.assign({}, currentScore, _defineProperty({}, category, numberValue + 5)));\n    if (!(numberValue >= 10)) setNumberValue(numberValue + 5);\n  };\n\n  return __jsx(React.Fragment, null, __jsx(StyledIncrementButton, {\n    disabled: numberValue === 0,\n    onClick: function onClick() {\n      return onMinus();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 12\n    }\n  }, \"-\"), numberValue, __jsx(StyledIncrementButton, {\n    disabled: numberValue === 10,\n    onClick: function onClick() {\n      return onPlus();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 128\n    }\n  }, \"+\"));\n};\n\nvar sortUserList = function sortUserList(users, scoringId) {\n  var index = users.findIndex(function (user) {\n    return user.id === scoringId;\n  });\n\n  if (index != -1) {\n    var first = users.splice(index, 1)[0];\n    users.unshift(first);\n    return users;\n  }\n\n  return users;\n};\n\nexport default ResultsTable;","map":{"version":3,"sources":["/Users/farshadghazanfari/Documents/www/npat/components/Game/ResultsTable.js"],"names":["React","useState","useEffect","styled","Button","Spinner","FlexColumn","FlexContainer","theme","socket","TableContainer","div","Container","Paper","Submission","span","colors","blue","StyledIncrementButton","button","props","disabled","InputContainer","NumberContainer","ResultsTable","gameState","round","handleSubmitScore","scoreSubmitted","scorePartner","initialScore","categories","scoringId","scoringType","id","users","sortUserList","forEach","user","cat","similar","similarityCheck","value","Object","assign","currentScore","setCurrentScore","totalScore","sumAllScores","name","map","display","justifyContent","category","selfScoreCard","color","red","marginBottom","alignItems","width","fontSize","responses","event","preventDefault","currentUserId","currentUser","find","currentUserResponse","toLowerCase","trim","filter","otherResponse","scores","keys","reduce","a","b","NumberInput","numberValue","setNumberValue","onMinus","onPlus","index","findIndex","first","splice","unshift"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button, Spinner, FlexColumn, FlexContainer } from '../StyledComponents'\nimport theme from '../../constants/theme'\nimport { socket } from '../../constants/websocket'\n\nconst TableContainer = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-around;\n`\n\nconst Container = styled.div`\n  padding: 20px 0;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex-wrap: wrap;\n`\n\nconst Paper = styled.div`\n  background: white;\n  background-size: 100% 1.2em;\n  height: auto;\n  margin: 0 auto;\n  margin-top: 30px;\n  box-shadow: #9e9e9e63 6px 7px 14px 0px;\n  width: 250px;\n  padding: 30px 30px 30px 30px;\n  background-image:\n  linear-gradient(90deg, transparent 49px, transparent 49px, transparent 51px, transparent 51px),\n  linear-gradient(#eee .1em, transparent .1em);\n`\n\nconst Submission = styled.span`\n  color: ${theme.colors.blue};\n  word-break: break-all;\n`\n\nconst StyledIncrementButton = styled.button`\n  font-weight: bold;\n  font-size: 14px;\n  border: ${props => props.disabled ? '1px solid gray' : '1px solid black'};\n  color: ${props => props.disabled ? 'gray' : 'black'};\n  cursor: ${props => props.disabled ? 'not-allowed' : 'pointer'};\n`\n\nconst InputContainer = styled.div`\n  margin-left: 15px;\n  font-size: 1.5em;\n  display: flex;\n  align-items: center;\n  width: 80px;\n  justify-content: space-between;\n`\n\nconst NumberContainer = styled.div`\n  margin-left: 15px;\n  font-size: 1.5em;\n  display: flex;\n  align-items: center;\n  width: 80px;\n  justify-content: center;\n`\n\nconst ResultsTable = ({ gameState, round, handleSubmitScore, scoreSubmitted, scorePartner }) => {\n  let initialScore = {}\n  const categories = gameState.categories;\n\n  let scoringId = gameState.scoringType === \"cross\" ? scorePartner.id : socket.id\n  // sort users so the person being score always comes first\n  let users = sortUserList([...gameState.users], scoringId)\n\n  users.forEach(user => {\n    categories.forEach(cat => {\n      let similar = similarityCheck(cat, users, user.id, round)\n      if (user.id === scoringId && similar.value) {\n\n        initialScore = Object.assign({}, initialScore, { [cat]: 5 })\n      }\n    })\n  })\n\n  const [currentScore, setCurrentScore] = useState(initialScore);\n\n  let totalScore = 0;\n  useEffect(() => {\n    totalScore = sumAllScores(currentScore)\n  }, [currentScore])\n\n\n  return <>\n    {gameState.scoringType === \"cross\" ? <FlexContainer><h1>You are scoring for <Submission>{scorePartner.name}</Submission>!</h1></FlexContainer> : false}\n    <TableContainer>\n      {users.map(user => <Paper key={user.id}>\n        <h2 style={{ display: 'flex', justifyContent: 'space-between' }}><span>{user.name}</span>\n          {user.id === scoringId ? <span>Score</span> : false}\n        </h2>\n        {categories.map(category => {\n          let similar = similarityCheck(category, users, user.id, round)\n          let selfScoreCard = user.id === scoringId;\n          return <React.Fragment key={category}>\n            {similar.value && selfScoreCard ? <span style={{ color: theme.colors.red }}>{scorePartner.name || 'You'} and {similar.name} put down the same word for {category}</span> : false}\n            <div style={{ marginBottom: '10px', display: \"flex\", justifyContent: 'space-between', alignItems: 'center' }} key={category}>\n              <div style={{ width: selfScoreCard ? \"150px\" : \"auto\", fontSize: \"1.2em\" }}>\n                {category}:{`  `} <Submission>{user.responses[round][category] || '-'}</Submission>\n              </div>\n              {selfScoreCard ?\n                user.responses[round][category] ? <InputContainer>\n                  <NumberInput category={category} setCurrentScore={setCurrentScore} currentScore={currentScore} value={similar.value ? 5 : 0} /> </InputContainer> : <NumberContainer>0</NumberContainer>\n                : ''}\n            </div>\n          </React.Fragment>\n        }\n        )}\n        {user.id === scoringId ? <h2>{`Total Score: ${sumAllScores(currentScore)}`}</h2> : false}\n      </Paper>)}\n    </TableContainer>\n    <Container>\n      {!scoreSubmitted ? <>\n        <Button onClick={(event) => {\n          event.preventDefault()\n          handleSubmitScore(totalScore, scoringId)\n        }}>Submit</Button>\n      </> : <FlexColumn>\n          <h2>Waiting for others</h2>\n          <Spinner />\n        </FlexColumn>}\n    </Container>\n  </>\n}\n\nconst similarityCheck = (category, users, currentUserId, round) => {\n  let currentUser = users.find(user => user.id === currentUserId);\n  let currentUserResponse = currentUser.responses[round][category] ? currentUser.responses[round][category].toLowerCase().trim() : null;\n\n  let value = false;\n  let name = null;\n  users.filter(user => user.id !== currentUserId).forEach(user => {\n    let otherResponse = user.responses[round][category] ? user.responses[round][category].toLowerCase().trim() : null;\n    if (currentUserResponse && otherResponse && (currentUserResponse === otherResponse)) {\n      value = true;\n      name = user.name\n    }\n    return;\n  })\n  return { value, name };\n}\n\nconst sumAllScores = (scores) => Object.keys(scores).map(cat => scores[cat]).reduce((a, b) => a + b, 0)\n\nconst NumberInput = ({ value, currentScore, setCurrentScore, category }) => {\n  const [numberValue, setNumberValue] = useState(value)\n  useEffect(() => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: value }))\n  }, [])\n\n  const onMinus = () => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: numberValue - 5 }))\n    if (!(numberValue <= 0)) setNumberValue(numberValue - 5)\n  }\n\n  const onPlus = () => {\n    setCurrentScore(Object.assign({}, currentScore, { [category]: numberValue + 5 }))\n    if (!(numberValue >= 10)) setNumberValue(numberValue + 5)\n  }\n  return <><StyledIncrementButton disabled={numberValue === 0} onClick={() => onMinus()}>-</StyledIncrementButton>{numberValue}<StyledIncrementButton disabled={numberValue === 10} onClick={() => onPlus()}>+</StyledIncrementButton></>\n}\n\n\nconst sortUserList = (users, scoringId) => {\n  let index = users.findIndex(user => user.id === scoringId);\n  if (index != -1) {\n    let first = users.splice(index, 1)[0];\n    users.unshift(first);\n    return users;\n  }\n  return users\n}\n\n\nexport default ResultsTable;"]},"metadata":{},"sourceType":"module"}